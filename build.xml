<project name="Community Dashboard Editor" basedir="." default="build-and-test"
         xmlns:ivy="antlib:org.apache.ivy.ant">

    <description>Data Access v2 convenience build</description>

    <property file="core/build.properties"/>

    <target name="clean-all">
        <ant dir="api" antfile="build.xml" target="clean-all" inheritAll="true"/>
        <ant dir="core" antfile="build.xml" target="clean-all" inheritAll="true"/>
    </target>

    <target name="resolve">
        <ant dir="api" antfile="build.xml" target="resolve" inheritAll="true"/>
        <ant dir="core" antfile="build.xml" target="resolve" inheritAll="true"/>
    </target>

    <target name="build" depends="clean-all, resolve">
        <ant dir="api" antfile="build.xml" target="dist" inheritAll="true"/>
        <ant dir="core" antfile="build.xml" target="dist" inheritAll="true"/>
    </target>

    <target name="build-and-test" depends="build">
        <ant dir="core" antfile="build.xml" target="test" inheritAll="true"/>
    </target>

    <target name="install" depends="build-and-test"> 
        <echo message="Installing ${impl.title} into ${pentaho.solutions.dir}/system/${package.root.dir}" />
        <ant dir="core" antfile="build.xml" target="install" inheritAll="true"/>
    </target>

</project>